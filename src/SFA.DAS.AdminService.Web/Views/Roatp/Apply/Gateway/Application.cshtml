@using SFA.DAS.AssessorService.Domain.Extensions;
@using SFA.DAS.AssessorService.ApplyTypes.Roatp;

@model SFA.DAS.AdminService.Web.ViewModels.Roatp.Gateway.RoatpGatewayApplicationViewModel

@{
    ViewBag.Title = "Gateway evaluation";
    Layout = "_Layout";
}

<a asp-action="InProgressApplications" asp-controller="RoatpGateway" class="govuk-back-link">Back</a>
<main class="govuk-main-wrapper " id="main-content" role="main">
    <div class="govuk-grid-row">
        <div class="govuk-grid-column-two-thirds">

            @if (!ViewData.ModelState.IsValid)
            {
                <div class="govuk-error-summary" aria-labelledby="error-summary-title" role="alert" tabindex="-1" data-module="error-summary">
                    <h2 class="govuk-error-summary__title" id="error-summary-title">
                        There is a problem
                    </h2>
                    <div class="govuk-error-summary__body">
                        <ul class="govuk-list govuk-error-summary__list">
                            <li><a sfa-validation-for="IsGatewayApproved"></a></li>
                        </ul>
                    </div>
                </div>
            }

            <h1 class="govuk-heading-xl">Application assessment overview</h1>
            <h2 class="govuk-heading-m">Organisation details</h2>

            <dl class="govuk-summary-list">
                @if (!string.IsNullOrWhiteSpace(Model.Ukprn))
                {
                    <div class="govuk-summary-list__row">
                        <dt class="govuk-summary-list__key">
                            UKPRN
                        </dt>
                        <dd class="govuk-summary-list__value">
                            @Model.Ukprn
                        </dd>
                    </div>
                }
                @if (!string.IsNullOrWhiteSpace(Model.OrganisationName))
                {
                    <div class="govuk-summary-list__row">
                        <dt class="govuk-summary-list__key">
                            Organisation name
                        </dt>
                        <dd class="govuk-summary-list__value">
                            @Model.OrganisationName
                        </dd>
                    </div>
                }
                @if (Model.ApplicationRoute > 0)
                {
                    <div class="govuk-summary-list__row">
                        <dt class="govuk-summary-list__key">
                            Provider route
                        </dt>
                        <dd class="govuk-summary-list__value">
                            @Model.ApplicationRoute
                        </dd>
                    </div>
                }
                @if (!string.IsNullOrWhiteSpace(Model.ApplicationReference))
                {
                    <div class="govuk-summary-list__row">
                        <dt class="govuk-summary-list__key">
                            Application reference
                        </dt>
                        <dd class="govuk-summary-list__value">
                            @Model.ApplicationReference
                        </dd>
                    </div>
                }
                @if (Model.SubmittedDate.HasValue)
                {
                    <div class="govuk-summary-list__row">
                        <dt class="govuk-summary-list__key">
                            Date application submitted
                        </dt>
                        <dd class="govuk-summary-list__value">
                            @Model.SubmittedDate.ToSfaShortDateString()
                        </dd>
                    </div>
                }
            </dl>
        </div>
    </div>

    <div class="govuk-grid-row">
        <div class="govuk-grid-column-two-thirds">
            <form class="js-disable-on-submit" asp-action="EvaluateGateway" asp-controller="RoatpGateway">
                <input type="hidden" name="ApplicationId" value="@Model.ApplicationId" />
                <input type="hidden" name="Id" value="@Model.Id" />
                <input type="hidden" name="OrgId" value="@Model.OrgId" />

                <div class="govuk-form-group" sfa-anyvalidationerror-class="govuk-form-group--error">
                    <fieldset class="govuk-fieldset">
                        <legend id="IsGatewayApproved">
                            <h2 class="govuk-heading-l">
                                What is the grade for this Gateway?
                            </h2>
                        </legend>

                        <span class="govuk-error-message" asp-validation-for="IsGatewayApproved"></span>

                        <div class="govuk-radios govuk-radios--inline">
                            <div class="govuk-radios__item">
                                <input class="govuk-radios__input" asp-for="IsGatewayApproved" id="options_yes" type="radio" value="True" sfa-validation-for="IsGatewayApproved" />
                                <label class="govuk-label govuk-radios__label" for="options_yes">
                                    Approve
                                </label>
                            </div>
                            @*<div class="govuk-radios__item">
                                <input class="govuk-radios__input" asp-for="GatewayReviewStatus" id="options_no" type="radio" value="False" sfa-validation-for="IsGatewayApproved" />
                                <label class="govuk-label govuk-radios__label" for="options_no">
                                    Decline
                                </label>
                            </div>*@
                        </div>
                    </fieldset>
                </div>

                <button class="govuk-button" type="submit">Confirm and submit</button>
            </form>
        </div>
    </div>
</main>